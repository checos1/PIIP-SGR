

<div style="background-color:white;padding-top:2rem;padding-bottom:0px !important;max-width:auto !important;" ng-init="vm.initCargarArchivos()">
    <div class="row" style="padding-top: 2rem; padding-left: 0;">
        <div class="col-md-12" style="display: inline-flex; padding-left: 0;">
            <span class="label" style="color: #004884; font-size: 24px; font-weight: 400;padding-left:0;">Carga documentos </span>
            <div ng-click="vm.abrirTooltip()">
                <svg class="mi-card__tooltip-icon" xmlns="http://www.w3.org/2000/svg" width="17.037" height="17.037" viewBox="0 0 17.037 17.037">
                    <g id="Grupo_5110" data-name="Grupo 5110" transform="translate(0 0)">
                        <path id="Caminho_9243" data-name="Caminho 9243" d="M8.552,0A8.552,8.552,0,0,0,0,8.485a8.609,8.609,0,0,0,8.552,8.552A8.519,8.519,0,0,0,8.552,0Zm0,14.542a1,1,0,1,1,1-1A1,1,0,0,1,8.552,14.542Zm1.769-6.136A2.663,2.663,0,0,0,9.55,10.22v.262a1,1,0,0,1-2,0V10.22A4.614,4.614,0,0,1,9.141,6.8,1,1,0,1,0,7.554,5.99a1,1,0,0,1-2,0,2.995,2.995,0,1,1,4.764,2.416Z" transform="translate(0 0)" fill="#36c"></path>
                    </g>
                </svg>
            </div>
        </div>

    </div>

    <div class="row" style="padding-top:2rem;">
        <div class="col-md-12" style="padding-top: 2rem; height: 230px; padding-left: 0px">
            <div  id="{{vm.nombreComponente}}-archivo-error" style="padding-left: 0.5rem;" class="col-md-12 hidden uMensajeError"></div>
            <div class="form-group" style="height: 100% !important;">
                <div class="row" style="height: 100% !important; padding-left: 2rem;">
                    <div class="col-md-6" style="padding-left: 0px;">
                        <span class="uLabelCampoNegro">Archivo*</span>
                        <span style="padding-left:2px;">Se permiten archivos de tipo  jpg, jpeg, mp4, pdf, zip y rar. Peso máximo {{vm.ConsultarTamanioMaxDocs}} M</span>
                    </div>
                    <div class="col-md-6">
                        <span class="uLabelCampoNegro" style="padding-left:2rem;">Descripción*</span>
                        <span style="padding-left:2px;">(Máximo 180 caracteres)</span>
                    </div>
                    <div class="col-md-12"  style="padding-left: 0px;">
                        <div id="soporte-error-{{vm.nombreComponente}}" class="hidden uMensajeError" style="width: 100%; padding-left: 1.5rem;"><span style=" padding-left: 2rem;">Campo obligatorio</span></div>
                    </div>

                    <div class="col-md-6" style="padding-top: 1rem; padding-left: -3rem">
                        <div class="row">
                            <div class="col-md-12 divpanelcargarchivoDNP" style="width:100% !important;">
                                <button ng-class="{'my-disable':vm.archivo !== undefined && vm.archivo !== ''}" style="padding-top: 0px !important;" class="btncargarch" type="button" uib-tooltip="Examinar" ng-click="vm.adjuntarArchivo()">
                                    EXAMINAR
                                </button>
                                <!--<input type="file" style="display:none" onchange="angular.element(this).scope().SelectFile(event)" file-model-no-preview="data.file" id="control" />-->
                                <input type="file" style="display:none" id="file-{{vm.section}}" name='files[]' onchange="angular.element(this).scope().fileNameChanged(this)" multiple />
                                <input type="search" style="display:none" id="firmaNombreArchivo" ng-model="vm.nombreArchivo" class="form-control InputSearchDNP " placeholder="" ng-change="ChangeArchivoSet()">
                                <span>{{vm.nombreArchivo}}</span>
                                <button style="padding-top: 0px !important;" class="btncancearch" ng-class="{'my-disable':vm.archivo === undefined || vm.archivo === ''}" type="button" uib-tooltip="Cancelar" ng-click="vm.onClickCancelar()">
                                    X
                                </button>
                            </div>
                            <div class="col-md-12" style="padding-top: 1rem; padding-left: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <span class="uLabelCampoNegro">Tipo documento*</span>
                                    </div>
                                    <div class="col-md-12" style="padding-bottom: 1rem;">
                                        <div id="tipoarchivo-error-{{vm.nombreComponente}}" class="hidden uMensajeError" style="width:100%;padding-left:1.5rem;"><span style=" padding-left: 2rem;">Campo obligatorio</span></div>
                                    </div>


                                    <div class="col-md-12" style="height:35px; padding-top: 1rem; padding-left: -1.5rem">
                                        <select name="ddlTipoArchivo" ng-change="vm.onChangeTipoArchivo(this)" class="select" id="ddlTipoArchivo" style="width: 98%; height: 100% !important" ng-model="vm.idTipoArchivoSeleccionado">
                                            <option class="option" value='0' selected>Seleccione...</option>
                                            <option class="option" ng-repeat="tipoArchivo in vm.listaTipoArchivos" ng-value="tipoArchivo.Id">{{ tipoArchivo.TipoDocumento }} </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="padding-top: 1rem; padding-left: 0;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <span class="uLabelCampoNegro">Vigencia / Periodo</span>
                                    </div>



                                    <div class="col-md-12" style="height:35px; padding-top: 1rem; padding-left: -1.5rem">
                                        <select name="ddlVigencia" ng-change="vm.onChangeVigencia(this)" class="select" id="ddlVigencia" style="width:98%;height:100% !important" ng-model="vm.idVigenciaSeleccionado">
                                            <option class="option" value='0' selected>Seleccione...</option>
                                            <option class="option" ng-repeat="vigencia in vm.listaVigencias" ng-value="vigencia.Id">{{ vigencia.Descripcion }} </option>
                                        </select>
                                    </div>
                                    <div class="col-md-12" style="padding-bottom: 1rem;">
                                        <div id="vigencia-error-{{vm.nombreComponente}}" class="hidden uMensajeError" style="width:100%;padding-left:1.5rem;"><span style=" padding-left: 2rem;">Campo obligatorio</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" style=" padding-top: 1rem; padding-left: 5rem;height:100%">
                        <div class="row" style="height:100%;">
                            <div class="textAreDivRes" style="border: solid 1px gray;  height: 100%;">
                                <textarea rows="3"
                                          id="pregunta"
                                          name="observacion"
                                          ng-model="vm.descripcion"
                                          ng-value="vm.descripcion"
                                          minlength="1"
                                          maxlength="180"
                                          class="uTextAreaSinBorde text-justificado"
                                          style="height:100%"></textarea>
                            </div>
                        </div>
                        <div class="row" style="padding-left: 0px;">
                            <div id="descripcion-error-{{vm.nombreComponente}}" class="hidden uMensajeError" style="width: 100%; padding-left: 1.5rem;"><span style=" padding-left: 2rem;">Campo obligatorio</span></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" style="padding-top: 4rem;">
            <span class="buttonbar pull-right" style="padding-top: 2rem;">
                <a ng-click="vm.onClickCargar()"><span class="uLabelCampo_fp1" has-claim has-opciones="['TramitesVF:CargarArchivos']"
                          style="text-decoration: underline;color: #36C" id="archivo-{{section}}">AGREGAR</span></a>
            </span>
        </div>

        <div class="col-md-12"></div>
    </div>
    <div id="documentossoportealojararchivos-archivo-error" class="hidden uMensajeError"></div>
    <div class="row">
        <div class="col-md-10" style="padding-left:0">
            <span class="uLabelCampoNegro" style="padding-left:0rem;">{{vm.titulogrilla}}</span>
        </div>
        <div class="col-md-2" style="padding-top: 2rem; text-align: right;">
            <span class="uLabelCampoNegro" style="padding-left:0rem;">Total&nbsp;&nbsp;{{vm.totalRegistros}} </span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" style="padding-left:0">
            <table class="TableDNP">
                <thead>
                    <tr>
                        <th class="columAcc"></th>
                        <th class="textLeftDNP">Vigencia / Periodo</th>
                        <th class="textLeftDNP">Tipo de documento</th>
                        <th class="textLeftDNP">Documento</th>
                        <th class="textLeftDNP">Descripcion</th>
                        <th class="textRightDNP"></th>
                        <th class="textRightDNP"></th>
                        <th class="columAcc"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="objArchivo in vm.listaArchivos" style="width:85% !important" ng-init="objArchivoIndex = $index">

                        <td></td>
                        <td class="textLeftDNP"><span>{{objArchivo.descripcionperiodo}} </span></td>
                        <td class="textLeftDNP"><span>{{objArchivo.tipoDocumento}} </span></td>
                        <td class="textLeftDNP" style="overflow-wrap: break-word; max-width: 450px !important;"><span style="color:#36C; text-decoration: underline;">{{objArchivo.nombre}}</span><br /><span>{{objArchivo.datosDocumento}} </span></td>
                        <td class="textLeftDNP" style="overflow-wrap: break-word; max-width: 350px !important;">
                            <textarea disabled class="textAreatableDNP">{{objArchivo.descripcion}}</textarea>
                        </td>
                        <td>
                            <button class="btn" style="background:#fff;" uib-tooltip="Decargar archivo" ng-click="vm.descargarArchivoBlob(objArchivo)">
                                <svg style="color: rgb(83, 137, 223); padding-top: 1.2rem;" xmlns="http://www.w3.org/2000/svg" width="58" height="58" fill="currentColor" class="bi bi-cloud-arrow-down-fill" viewBox="0 0 28 28"> <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708z" fill="#5389df"></path> </svg>

                            </button>
                        </td>
                        <td>
                            <button ng-disabled="{{objArchivo.mostrarEliminar}} === false" has-claim has-opciones="['TramitesVF:EliminarArchivos']" class="btn" style="padding-top: 1px; background: #fff;" uib-tooltip="Eliminar archivo" ng-click="vm.eliminarArchivoBlob(objArchivo)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="28" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                                </svg>
                            </button>
                        </td>
                        <td></td>
                    </tr>
                </tbody>
            </table>

        </div>

     </div>


    </div>

