<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=301880
  -->
<configuration>
	<configSections>
		<section name="entityFramework"
			type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
			requirePermission="false"/>
		<section name="system.identityModel"
			type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
		<section name="system.identityModel.services"
			type="System.IdentityModel.Services.Configuration.SystemIdentityModelServicesSection, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
		<section name="configBuilders"
			type="System.Configuration.ConfigurationBuildersSection, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
			restartOnExternalChanges="false" requirePermission="false"/>
	</configSections>
	<appSettings>
		<add key="aspnet:MaxJsonDeserializerMembers" value="150000"/>
		<add key="NombreAplicacionBackbone" value="AP:PIIP"/>
		<add key="webpages:Version" value="3.0.0.0"/>
		<add key="webpages:Enabled" value="false"/>
		<add key="ClientValidationEnabled" value="true"/>
		<add key="UnobtrusiveJavaScriptEnabled" value="true"/>
		<add key="owin:AutomaticAppStartup" value="false"/>
		<!--STS-->
		<add key="STSAPPName" value="PIIPSTSLocal"/>
		<add key="STSRealm" value="http://localhost:3024/"/>
		<add key="STSIssuer" value="https://sts-test.dnp.gov.co/WebServices/CredentialStoreService.asmx"/>
		<add key="STSWebServiceUser" value="itcert:#79987654"/>
		<add key="STSWebServicePassword" value="Test@123"/>
		<!--B2C-->
		<add key="b2c:Tenant" value="dnpb2c.onmicrosoft.com"/>
		<add key="b2c:OpenIdBaseUrl" value="https://dnpb2c.b2clogin.com/"/>
		<add key="b2c:ClientId" value="e52427a6-af99-4022-ae89-d72b609bc63d"/>
		<add key="b2c:PolicySignin" value="B2C_1_Sign_in"/>
		<!--B2B-->
		<add key="b2b:Tenant" value="dnp.gov.co"/>
		<add key="b2b:ClientId" value="bc4293dd-1b04-44c0-93a0-98732ba5f16f"/>
		<add key="b2b:PolicySignin" value="PiipB2B"/>
		<!--AAD-->
		<!-- METADADOS -->
		<add key="ida:MultiTenantClientId" value="5530698e-c40a-4af3-ba9e-5881bbf11e35"/>
		<add key="multitenant:PolicySignin" value="PiipCommon"/>
		<add key="ida:MetadataAddress" value="https://as-identidad-sitio-ntdev.azurewebsites.net/"/>
		<add key="ida:MetadataAddressOpenId" value="OpenId/"/>
		<add key="ida:RedirectUri" value="http://localhost:3024/"/>
		<add key="ida:AADInstance" value="https://login.microsoftonline.com/"/>
		<add key="IdentidadCambioContrasena" value="CambioContrasena/Index/?id="/>
		<add key="ProyectosEstados" value="Aprobado|NoAprobado|Viable|EnEjecucion|Formulado"/>


		<!--LOCALHOST-->
		<!--<add key="ApiPiipCore" value="http://localhost:31573/"/>-->
		<add key="ApiServicioNegocio" value="https://as-serviciosnegocios-api-sgr.azurewebsites.net/"/>

		<!--<add key="ApiBackbone" value="http://localhost:3240/"/>-->
		<!--<add key="ApiServicioNegocioWBS" value="http://localhost:64730/"/>-->
		<!--<add key="ApiMotorFlujos" value="http://localhost:62626/"/>-->


		<add key="ApiAuditoria" value="https://as-auditoria-api-ntdev.azurewebsites.net/"/>
		<add key="ApiMensajeria" value="http://localhost:41055/"/>
		<!--<add key="ApiAutorizacion" value="http://localhost:10221/"/>-->
		<add key="ApiAutorizacion" value="https://as-autorizacion-api-ntdev.azurewebsites.net/"/>

		<add key="ApiNotificacion" value="https://notificacionwebapi-ntdev.azurewebsites.net/"/>
		<add key="ApiPiipCore" value="https://as-formularios-api-sgr.azurewebsites.net/"/>
		<add key="ApiIdentidad" value="http://localhost:8058/"/>
		<add key="ApiBackbone" value="http://localhost:3240/"/>
		<!--<add key="ApiServicioNegocio" value="https://as-serviciosnegocios-api-ntdev.azurewebsites.net/"/>-->
		<add key="ApiServicioNegocioWBS" value="https://as-serviciowbs-api-sgr.azurewebsites.net/"/>
		<add key="ApiMotorFlujos" value="https://as-motorflujos-api-sgr.azurewebsites.net/"/>
		<add key="ApiArchivo" value="https://as-archivos-api-ntdev.azurewebsites.net/"/>
		<add key="pdf:Backbone" value="https://as-backbone-sitio-ntdev.azurewebsites.net/"/>
		<add key="ApiManejadorArchivos" value="https://as-manejadorarchivos-api-ntdev.azurewebsites.net/"/>
		<add key="KeyCollection" value="Archivos"/>
		<add key="ApiFichasProyectos" value="https://as-fichasproyectos-api-ntdev.azurewebsites.net/"/>
		<add key="ApiServicioOrfeo" value="http://localhost:44355/"/>

		<!--Application Insights-->
		<add key="InstrumentationKey" value="4dc34ec5-49c6-48cf-b14d-41f575322101"/>
		<add key="InstrumentationEnabled" value="true"/>
		<!--Paginacion-->
		<add key="TopePaginacionConsultaAplicaciones" value="10"/>
		<add key="TopePaginacion" value="15"/>
		<add key="MaximoPaginas" value="10"/>
		<!--Ids de tipos de objetos de negocio-->
		<add key="IdTipoProyecto" value="bc154cba-50a5-4209-81ce-7c0ff0aec2ce"/>
		<add key="IdTipoTramite" value="9c5ef8c1-da05-48b9-ba29-00c9efd7a774"/>
		<add key="IdTipoTramiteProgramacion" value="241eeac1-89d1-4824-bd4f-d032649d8d82"/>
		<!--Redis Cache-->
		<add key="ApiCache" value="https://as-serviciosnegocio-api-uatntc.azurewebsites.net/"/>
		<add key="ApiCacheCatalogos" value="/api/Catalogo/"/>
		<!--Nombre troca de modulos-->
		<add key="NombreEntorno" value="Pruebas DEV"/>
		<add key="AdministracionURL" value="https://as-administracion-sitio-ntdev.azurewebsites.net/"/>
		<add key="BackboneURL" value="http://localhost:3024/"/>
		<!-- JWT -->
		<add key="JwtSecret" value="HSsAsDs1s8D3J21419Jf12fJfDb9f2Jg0a1Df9012gKgDg01g2gKDK12KDJ92192JRJs"/>
		<add key="JwtSecret-Servicio" value="22sAsDs1s8D3J21419Jf12fJfDb9f2Jg0a1I32KKKSs12gKgDg01g2gKDK12KDJ92192JRTR"/>

		<!--Gantt-->
		<add key="PowerBIGantt"
			value="https://app.powerbi.com/view?r=eyJrIjoiOGUyMDFjYmItMTdiZi00NjYyLTk3ZGEtYzE2MGI4ZjEwNjBlIiwidCI6IjA0MjYwZTIwLTIzNGMtNGM5Zi1hOWRkLTc5Mjg2YjFiNzBhYyIsImMiOjR9&amp;pageName=ReportSection3039f563f32a6afc67d7"/>
		<add key="PowerBIActividades"
			value="https://app.powerbi.com/view?r=eyJrIjoiMDBhOTlmN2QtOTc0OS00NzI3LWE3NmEtMjYyZjMxYTdiMDQxIiwidCI6IjA0MjYwZTIwLTIzNGMtNGM5Zi1hOWRkLTc5Mjg2YjFiNzBhYyIsImMiOjR9&amp;pageName=ReportSectiona662fb000c949c658d78"/>

	</appSettings>

	<location path="CambioContrasena">
		<system.web>
			<authorization>
				<allow users="*"/>
			</authorization>
		</system.web>
	</location>
	<system.web>
		<!--<authentication mode="None"/>-->
		<authorization>
			<deny users="?"/>
		</authorization>
		<compilation targetFramework="4.8" debug="true"/>
		<httpRuntime targetFramework="4.8" maxRequestLength="1048576" maxQueryStringLength="2097151" maxUrlLength="10999"/>
		<httpModules>
			<add name="TelemetryCorrelationHttpModule"
				type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation"/>
			<add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web"/>
		</httpModules>
		<globalization uiCulture="auto:en" culture="auto:en-GB" enableClientBasedCulture="true"/>
		<sessionState timeout="300"/>
	</system.web>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="System.Diagnostics.DiagnosticSource" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.ApplicationInsights" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-2.21.0.429" newVersion="2.21.0.429"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-12.0.0.0" newVersion="12.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.IdentityModel.Tokens.Jwt" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-4.0.40306.1554" newVersion="4.0.40306.1554"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.IdentityModel.Protocol.Extensions" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-1.0.40306.1554" newVersion="1.0.40306.1554"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-1.6.5135.21930" newVersion="1.6.5135.21930"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Security.Cryptography.Cng" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-4.3.3.0" newVersion="4.3.3.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
				<bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
				<bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
				<bindingRedirect oldVersion="0.0.0.0-5.2.7.0" newVersion="5.2.7.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-4.0.1.1" newVersion="4.0.1.1"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.SharePoint.Client.Runtime" publicKeyToken="71e9bce111e9429c" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-14.0.0.0" newVersion="14.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.SharePoint.Client" publicKeyToken="71e9bce111e9429c" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-14.0.0.0" newVersion="14.0.0.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0"/>
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
				<bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0"/>
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
	<entityFramework>
		<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
			<parameters>
				<parameter value="mssqllocaldb"/>
			</parameters>
		</defaultConnectionFactory>
		<providers>
			<provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"/>
		</providers>
	</entityFramework>
	<system.webServer>
		<security>
			<requestFiltering>
				<requestLimits maxAllowedContentLength="1073741824" maxUrl="10999" maxQueryString="2097151"/>
			</requestFiltering>
		</security>
		<httpProtocol>
			<customHeaders>
				<!-- Remover encabezados personalizados de versi�n/ -->
				<remove name="X-AspNet-Version"/>
				<remove name="X-AspNetMvc-Version"/>
				<remove name="X-Powered-By"/>
				<!-- Sending the new X-Content-Type-Options response header with the value 'nosniff' -->
				<add name="X-Content-Type-Options" value="nosniff"/>

				<!-- X-Frame-Options By preventing a browser from framing your site -->
				<add name="X-Frame-Options" value="SAMEORIGIN"/>

				<!-- Setting X-Permitted-Cross-Domain-Policies header to �master-only� -->
				<add name="X-Permitted-Cross-Domain-Policies" value="master-only"/>

				<!-- X-XSS-Protection sets the configuration for the cross-site scripting filter built into most browsers. -->
				<add name="X-Xss-Protection" value="1; mode=block"/>
			</customHeaders>
		</httpProtocol>
		<rewrite>
			<rules>
				<rule name="AngularJS Routes" stopProcessing="true">
					<match url=".*"/>
					<conditions logicalGrouping="MatchAll">
						<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
						<add input="{REQUEST_URI}" pattern="^/(api)" negate="true"/>
						<add input="{REQUEST_URI}" pattern="^/(Account)" negate="true" ignoreCase="true"/>
						<add input="{REQUEST_URI}" pattern="^/(Home)" negate="true" ignoreCase="true"/>
						<add input="{REQUEST_URI}" pattern="^/(PDF)" negate="true" ignoreCase="true"/>
						<add input="{REQUEST_URI}" pattern="^/(Home/ObtenerExcel)" negate="true" ignoreCase="true"/>
						<add input="{REQUEST_URI}" pattern="^/(CambiarClave)" negate="true" ignoreCase="true"/>
						<add input="{REQUEST_URI}" pattern="^/(i18n)" negate="true"/>
					</conditions>
					<action type="Rewrite" url="/"/>
				</rule>
			</rules>
		</rewrite>
		<validation validateIntegratedModeConfiguration="false"/>
		<modules>
			<remove name="TelemetryCorrelationHttpModule"/>
			<add name="TelemetryCorrelationHttpModule"
				type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation" preCondition="managedHandler"/>
			<remove name="ApplicationInsightsWebTracking"/>
			<add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web"
				preCondition="managedHandler"/>
			<add name="WSFederationAuthenticationModule"
				type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
				preCondition="managedHandler"/>
			<add name="SessionAuthenticationModule"
				type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
				preCondition="managedHandler"/>
		</modules>
		<staticContent>
			<remove fileExtension=".woff"/>
			<mimeMap fileExtension=".woff" mimeType="font/woff"/>
			<remove fileExtension=".woff2"/>
			<mimeMap fileExtension=".woff2" mimeType="font/woff2"/>
			<remove fileExtension=".json"/>
			<mimeMap fileExtension=".json" mimeType="application/json"/>
			<clientCache cacheControlMode="DisableCache"/>
		</staticContent>
	</system.webServer>
	<!-- STS Settings 4  -->
	<system.identityModel>
		<identityConfiguration>
			<!--Configuracion especial para que funcione en un ambiente de WebSites en Azure-->
			<certificateValidation certificateValidationMode="None" revocationMode="NoCheck" trustedStoreLocation="LocalMachine"/>
			<audienceUris mode="Never"/>
			<issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
				<trustedIssuers>
					<add thumbprint="8ABCC136ACB543270330C8AF4177ADE33EE7BC62" name="Sts.Provider"/>
					<add thumbprint="1A8F72C0B5BB89892A19E2674056904718E6BE6C" name="OI.Sts.provider"/>
				</trustedIssuers>
			</issuerNameRegistry>
			<securityTokenHandlers>
				<remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
				<add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
					<sessionTokenRequirement lifetime="10:00:00"/>
				</add>
			</securityTokenHandlers>
		</identityConfiguration>
	</system.identityModel>
	<system.identityModel.services>
		<federationConfiguration>
			<cookieHandler requireSsl="false" name="MGAWebAppFedAuth" path="/" persistentSessionLifetime="0:10:0"/>
			<wsFederation passiveRedirectEnabled="true" issuer="https://sts-test.dnp.gov.co/" realm="http://localhost:3024/" requireHttps="false"/>
		</federationConfiguration>
	</system.identityModel.services>
	<!-- STS Settings 4 END  -->
	<system.diagnostics>
		<trace autoflush="true" indentsize="0">
			<listeners>
				<add name="myAppInsightsListener"
					type="Microsoft.ApplicationInsights.TraceListener.ApplicationInsightsTraceListener, Microsoft.ApplicationInsights.TraceListener"/>
			</listeners>
		</trace>
	</system.diagnostics>
	<system.codedom>
		<compilers>
			<compiler extension=".cs" language="c#;cs;csharp" warningLevel="4" compilerOptions="/langversion:7.3 /nowarn:1659;1699;1701;612;618"
				type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=3.6.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
			<compiler extension=".vb" language="vb;vbs;visualbasic;vbscript" warningLevel="4"
				compilerOptions="/langversion:default /nowarn:41008,40000,40008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+"
				type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=3.6.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
		</compilers>
	</system.codedom>
</configuration>