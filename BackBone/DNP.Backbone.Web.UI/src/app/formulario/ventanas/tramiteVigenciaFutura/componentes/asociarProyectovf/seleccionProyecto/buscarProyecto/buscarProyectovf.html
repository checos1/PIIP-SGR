<div ng-init="vm.inicializarBusqueda()">
    <div class="row" style="padding-top:2rem;">
        <div class="col-md-8" style="display:inline-flex;">
            <span style="color: #004884; font-size: 24px; font-weight: 400;">Proyecto asociado</span>
        </div>
        <div class="col-md-4" style="display:inline-flex;" ng-if="vm.proyectoId==0">
            <span class="textRightDNP" style="font-weight: 400 !important;">Buscar por BPIN o nombre del proyecto</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8" style="display:inline-flex;padding-top:2rem;">
            <span ng-if="vm.estadoAjusteCreado && !vm.estadoAjusteFinalizado" style="background-color: rgba(246, 248, 249, 1); padding-left: 2rem; padding-right: 2rem; height: 40px; padding-top: 1rem; color: #004884;font-weight:700; ">
                <svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" width="16px" height="16px">
                    <g transform="matrix(1 0 0 1 -388 -256 )">
                        <path d="M 15.4288901282766 0  C 15.5478713515523 0  15.6549544525005 0.0327380952380967  15.750139431121 0.0982142857142865  C 15.9464584495259 0.241071428571429  16.026770775237 0.431547619047619  15.9910764082543 0.669642857142858  L 13.7066369213608 14.3839285714286  C 13.6768916155419 14.5565476190476  13.5817066369214 14.6904761904762  13.4210819854992 14.7857142857143  C 13.3377951292062 14.8333333333333  13.2455846811675 14.8571428571429  13.1444506413832 14.8571428571429  C 13.0790109685815 14.8571428571429  13.0076222346161 14.8422619047619  12.9302844394869 14.8125  L 8.88789737869492 13.1607142857143  L 6.72838817624094 15.7946428571429  C 6.62130507529281 15.9315476190476  6.47555307678007 16  6.29113218070273 16  C 6.21379438557353 16  6.14835471277189 15.9880952380952  6.09481316229783 15.9642857142857  C 5.98178100018591 15.922619047619  5.89105781743819 15.8526785714286  5.82264361405466 15.7544642857143  C 5.75422941067113 15.65625  5.72002230897936 15.547619047619  5.72002230897936 15.4285714285714  L 5.72002230897936 12.3125  L 13.4300055772448 2.85714285714286  L 3.89068600111545 11.1160714285714  L 0.365867261572783 9.66964285714286  C 0.145751998512735 9.58630952380952  0.0267707752370329 9.42261904761905  0.00892359174567764 9.17857142857143  C -0.00297453058189255 8.94047619047619  0.0922104480386689 8.76488095238095  0.294478527607362 8.65178571428572  L 15.1433351924149 0.0803571428571424  C 15.2325711098717 0.0267857142857135  15.3277560884923 0  15.4288901282766 0  Z " fill-rule="nonzero" fill="#004884" stroke="none" transform="matrix(1 0 0 1 388 256 )" />
                    </g>
                </svg>
                {{vm.estadoTramite}}
            </span>
            <div  ng-if="vm.estadoAjusteCreado && vm.estadoAjusteFinalizado" class="divInfoAplicDNP">
                <span><img src="Img/icodivAp.svg" /> {{vm.estadoTramite}}</span>
            </div>
            <!--<span ng-if="vm.estadoAjusteCreado && vm.estadoAjusteFinalizado" style="padding-left: 2rem; padding-right: 2rem; height: 40px; padding-top: 1rem; color: rgba(6, 145, 105, 1); font-weight: 700; background-color: rgba(197, 240, 193, 1); border-color: rgba(6, 145, 105, 1); ">
                <svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" width="16px" height="16px">
                    <g transform="matrix(1 0 0 1 -388 -256 )">
                        <path d="M 15.4288901282766 0  C 15.5478713515523 0  15.6549544525005 0.0327380952380967  15.750139431121 0.0982142857142865  C 15.9464584495259 0.241071428571429  16.026770775237 0.431547619047619  15.9910764082543 0.669642857142858  L 13.7066369213608 14.3839285714286  C 13.6768916155419 14.5565476190476  13.5817066369214 14.6904761904762  13.4210819854992 14.7857142857143  C 13.3377951292062 14.8333333333333  13.2455846811675 14.8571428571429  13.1444506413832 14.8571428571429  C 13.0790109685815 14.8571428571429  13.0076222346161 14.8422619047619  12.9302844394869 14.8125  L 8.88789737869492 13.1607142857143  L 6.72838817624094 15.7946428571429  C 6.62130507529281 15.9315476190476  6.47555307678007 16  6.29113218070273 16  C 6.21379438557353 16  6.14835471277189 15.9880952380952  6.09481316229783 15.9642857142857  C 5.98178100018591 15.922619047619  5.89105781743819 15.8526785714286  5.82264361405466 15.7544642857143  C 5.75422941067113 15.65625  5.72002230897936 15.547619047619  5.72002230897936 15.4285714285714  L 5.72002230897936 12.3125  L 13.4300055772448 2.85714285714286  L 3.89068600111545 11.1160714285714  L 0.365867261572783 9.66964285714286  C 0.145751998512735 9.58630952380952  0.0267707752370329 9.42261904761905  0.00892359174567764 9.17857142857143  C -0.00297453058189255 8.94047619047619  0.0922104480386689 8.76488095238095  0.294478527607362 8.65178571428572  L 15.1433351924149 0.0803571428571424  C 15.2325711098717 0.0267857142857135  15.3277560884923 0  15.4288901282766 0  Z " fill-rule="nonzero" fill="#004884" stroke="none" transform="matrix(1 0 0 1 388 256 )" />
                    </g>
                </svg>
                {{vm.estadoTramite}}
            </span>-->
            <span ng-if="!vm.estadoAjusteCreado " class="label" style=" background-color: #e1dfdf; padding-left: 2rem; padding-right: 2rem; height: 40px; padding-top: 1rem; color: gray;">{{vm.estadoTramite}}</span>

            <div ng-click="vm.abrirTooltip()" style="padding-left: 1rem; padding-top: 1rem; ">
                <svg class="mi-card__tooltip-icon" xmlns="http://www.w3.org/2000/svg" width="17.037" height="17.037" viewBox="0 0 17.037 17.037">
                    <g id="Grupo_5110" data-name="Grupo 5110" transform="translate(0 0)">
                        <path id="Caminho_9243" data-name="Caminho 9243" d="M8.552,0A8.552,8.552,0,0,0,0,8.485a8.609,8.609,0,0,0,8.552,8.552A8.519,8.519,0,0,0,8.552,0Zm0,14.542a1,1,0,1,1,1-1A1,1,0,0,1,8.552,14.542Zm1.769-6.136A2.663,2.663,0,0,0,9.55,10.22v.262a1,1,0,0,1-2,0V10.22A4.614,4.614,0,0,1,9.141,6.8,1,1,0,1,0,7.554,5.99a1,1,0,0,1-2,0,2.995,2.995,0,1,1,4.764,2.416Z" transform="translate(0 0)" fill="#36c"></path>
                    </g>
                </svg>
            </div>
            <div  ng-if="vm.estadoAjusteCreado  && !vm.estadoAjusteFinalizado" style="padding-left:2rem;">
                <button has-claim has-opciones="['TramitesVigenciaFutura:AccionesPasoUno']" type="button" class="btn btn-default btn-md" tooltip-placement="top" uib-tooltip="Actualizar estado de proyecto" ng-click="vm.obtenerEstadoInstanciaProyecto()"
                        tabindex="0">
                    Actualizar estado
                </button>

            </div>
        </div>
        <div class="col-md-4 pull-right" ng-if="vm.proyectoId==0">
            <div class="input-group ">
                <input type="search" ng-model="vm.textoBuscar" class="form-control InputSearchDNP " placeholder="Buscar">
                <span class="input-group-addon imgTituloAccion spanSearchDNP" ng-click="vm.buscarProyecto()">
                    <i class="fa fa-search "></i>
                </span>
            </div>
        </div>
        <div class="col-md-5 pull-right" ng-if="vm.mostrar">
            <label>Devolver para: </label>
            <button has-claim has-opciones="['tramite:VFAmpliacionConcepto']" type="button"  ng-click="vm.actualizaEstado(0)" ng-disabled="vm.conceptoHabilitado">
                AMPLIAR CONCEPTO
            </button>
            <button has-claim has-opciones="['tramite:VFAmpliacionConcepto']" type="button"  ng-click="vm.actualizaEstado(1)" ng-disabled="vm.valorHabilitado">
                   AJUSTAR VALORES
            </button>
        </div>
    </div>
    <br />
    <!--<div class="filtro filtro-entidades" stye="background-color: #f5f5f5;" ng-if="vm.proyectoId==0">
        <div class="clearfix">
            <div class="row">
                <div class="col-md-12">
                    <div class="col-xs-2" style="text-align:left">
                        <span style="color:#004884;font-weight: 600;">Código BPIN</span>
                    </div>
                    <div class="col-md-9" style="text-align:left;">
                        <span style="color:#004884;font-weight: 600;">Nombre del Proyecto</span>
                    </div>
                    <div class="col-xs-1" style="text-align: left;">
                        <span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>-->
    <div class="row" ng-if="vm.proyectoId==0">
        <div class="col-md-12 grid-proyectos ">
            <div ui-grid="vm.gridProyectos" ng-style="vm.getTableHeightProyectos()" style="width: 1141px;" ui-grid-selection ui-grid-pinning ui-grid-resize-columns></div>
        </div>
    </div>
    <div class="row" style="padding-top:2rem;" ng-if="vm.proyectoId==0">
        <div class="col-md-11" style="display:inline-flex;">

        </div>
        <div class="col-md-1" style="display:inline-flex;">
            <span class="buttonbar pull-right">
                <a ng-click="vm.crearAsociacion()" has-claim has-opciones="['TramitesVigenciaFutura:AccionesPasoUno']"><span class="uLabelCampo_fp1" style="text-decoration:underline">AGREGAR</span></a>
            </span>
        </div>
    </div>
    <div></div>
    <datos-proyectovf datosproyecto="{{vm.datosproyecto}}" ng-if="vm.proyectoId!=0"></datos-proyectovf>


    <div class="modal " id="IPModal" tabindex="-1" role="dialog" aria-labelledby="IPModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content modal-contentDNP">
                <div class="modal-header">

                    <button type='button' class='swal2-close closemodalDNP' aria-label='Close this dialog' data-dismiss="modal">×</button>
                    <h3 class="modal-title TituloModal1DNP" id="modal-title">{{vm.tituloMensaje}} </h3>
                    <span class="TituloModal2DNP"> </span>
                </div>
                <div class="modal-body">
                    <p class="descripcionbodyDNP">{{vm.mensaje}}</p>
                    <p>
                        <div class="col-md-12 DetacolumnDNP">
                            <span class="notapregun">(Máximo 8.000 caracteres)</span>
                        </div>

                        <textarea rows="3" id="observacion" class="uLabelCampoNegro"
                                  ng-model="vm.model.observacion" minlength="1" maxlength="5000"></textarea>


                    </p>
                </div>
                <div class="modal-footer textCenterDNP">
                    <button class="btneditarDNP" type="button" data-dismiss="modal" >CANCELAR</button>
                    <button class="btnguardarDNP" type="button" ng-click="vm.aceptar()">ACEPTAR</button>
                </div>
            </div>
        </div>
    </div>


</div>
<link href="/Content/ui-gridDNP.css" rel="stylesheet" />

