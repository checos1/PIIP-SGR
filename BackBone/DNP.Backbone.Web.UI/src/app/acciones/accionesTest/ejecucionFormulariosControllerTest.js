describe("ejecucionFormulariosControllerTest", function() {


    window.beforeEach(module('backbone'));
    window.beforeEach(module('mocks.tests'));


    var $scope;
    var $controller;
    var ejecucionFormulariosController;
    var servicioVisualizacionFormularioMock;

    var formularioCompleto = {

        data: {
            "$id": "1",
            "Id": "f27afe2e-9031-4149-b9d9-063346991654",
            "Disenador": "[{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"$$hashKey\":\"object:1295\",\"id\":\"Nombre\",\"key\":\"Nombre\",\"title\":\"Nombre\",\"tooltip\":\"Nombre\",\"type\":\"controlTexto\",\"required\":false,\"htmlClass\":\"form-control\",\"defaultValue\":\"\",\"scripts\":\"\",\"tipoDato\":\"texto\",\"format\":\"string\",\"tipo\":\"text\",\"icon\":\"icon icon-text\",\"regex\":\"\",\"maxLength\":5}]],\"$$hashKey\":\"object:1287\"},{\"type\":\"contenedorDosColumnas\",\"id\":2,\"src\":\"/img/col02.png\",\"nombre\":\"2 col\",\"columns\":[[{\"estatico\":true,\"id\":\"Titulo\",\"key\":\"Titulo\",\"title\":\"Título y subtítulo\",\"tipoControl\":\"Título y subtítulo\",\"tipo\":\"title\",\"type\":\"controlTitulo\",\"format\":\"Campo texto largo\",\"textAling\":\"center\",\"tamano\":\"small\",\"visible\":true,\"titulo\":\"Título\",\"subtitulo\":\"Subtítulo\",\"content\":\"Título\",\"esInformativo\":true,\"icon\":\"icon icon-title\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:659\"}],[{\"id\":\"Descripcion\",\"key\":\"Descripcion\",\"title\":\"Descripcion\",\"placeholder\":\"Digite Descripcion\",\"tooltip\":\"Descripcion\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:847\"}]],\"$$hashKey\":\"object:646\"},{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"id\":\"UrlLogicApp\",\"key\":\"UrlLogicApp\",\"title\":\"UrlLogicApp\",\"placeholder\":\"Digite UrlLogicApp\",\"tooltip\":\"UrlLogicApp\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:633\"}]],\"$$hashKey\":\"object:628\"},{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"id\":\"LogicAppRelacionada\",\"key\":\"LogicAppRelacionada\",\"title\":\"LogicAppRelacionada\",\"type\":\"controlSelect\",\"tipoControl\":\"Lista desplegable\",\"placeholder\":\"Lista LogicAppRelacionada\",\"tipo\":\"dropdownlist\",\"format\":\"dropdownlist\",\"tooltip\":\"LogicAppRelacionada\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"selectedValue\":null,\"tabOrder\":0,\"urlGet\":\"\",\"nameSelected\":\"\",\"valueSelected\":\"\",\"titleMap\":[],\"icon\":\"icon icon-select\",\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"tipoDato\":\"lista\",\"$$hashKey\":\"object:448\"}]],\"$$hashKey\":\"object:327\"}]",
            "Form": "[{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"Nombre\",\"title\":\"Nombre\",\"type\":\"text\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"tooltip\":\"Nombre\",\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"Nombre\\\")\",\"description\":\"Nombre\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-6\",\"items\":[{\"key\":\"Titulo\",\"title\":\"Título y subtítulo\",\"type\":\"title\",\"format\":\"Campo texto largo\",\"titulo\":\"Título\",\"subtitulo\":\"Subtítulo\",\"textAling\":\"center\",\"tamano\":\"small\",\"visible\":true,\"esInformativo\":true,\"condition\":\"vm.esCampoVisible(\\\"Titulo\\\")\"}]},{\"type\":\"section\",\"htmlClass\":\"col-xs-6\",\"items\":[{\"key\":\"Descripcion\",\"title\":\"Descripcion\",\"type\":\"string\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"placeholder\":\"Digite Descripcion\",\"tooltip\":\"Descripcion\",\"tabindex\":0,\"readonly\":false,\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"Descripcion\\\")\",\"description\":\"Descripcion\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"UrlLogicApp\",\"title\":\"UrlLogicApp\",\"type\":\"string\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"placeholder\":\"Digite UrlLogicApp\",\"tooltip\":\"UrlLogicApp\",\"tabindex\":0,\"readonly\":false,\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"UrlLogicApp\\\")\",\"description\":\"UrlLogicApp\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"LogicAppRelacionada\",\"title\":\"LogicAppRelacionada\",\"type\":\"dropdownlist\",\"format\":\"dropdownlist\",\"required\":false,\"placeholder\":\"Lista LogicAppRelacionada\",\"tooltip\":\"LogicAppRelacionada\",\"tabindex\":0,\"urlGet\":\"\",\"valueSelect\":\"\",\"textSelect\":\"\",\"titleMap\":[],\"visible\":true,\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"condition\":\"vm.esCampoVisible(\\\"LogicAppRelacionada\\\")\",\"description\":\"LogicAppRelacionada\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"BarraDeProgreso\",\"title\":\"Progreso\",\"type\":\"barraDeProgreso\",\"tamano\":\"big\",\"visible\":true,\"valorMinimo\":0,\"valorMaximo\":100,\"porcentaje\":100,\"esInformativo\":true,\"condition\":\"vm.esCampoVisible(\\\"BarraDeProgreso\\\")\"}]}]},{\"type\":\"submit\",\"style\":\"btn-success\",\"title\":\"OK\"}]",
            "Schema": "{\"type\":\"object\",\"title\":\"Comment\",\"properties\":{\"Nombre\":{\"title\":\"Nombre\",\"type\":\"text\",\"format\":\"string\",\"maxLength\":5,\"pattern\":\"\",\"description\":\"Nombre\"},\"Titulo\":{\"title\":\"Título y subtítulo\",\"type\":\"title\",\"format\":\"Campo texto largo\"},\"Descripcion\":{\"title\":\"Descripcion\",\"type\":\"string\",\"format\":\"string\",\"maxLength\":200,\"pattern\":\"\",\"description\":\"Descripcion\"},\"UrlLogicApp\":{\"title\":\"UrlLogicApp\",\"type\":\"string\",\"format\":\"string\",\"maxLength\":200,\"pattern\":\"\",\"description\":\"UrlLogicApp\"},\"LogicAppRelacionada\":{\"title\":\"LogicAppRelacionada\",\"type\":[\"object\",null],\"format\":\"dropdownlist\",\"description\":\"LogicAppRelacionada\"},\"BarraDeProgreso\":{\"title\":\"Progreso\",\"type\":\"barraDeProgreso\"}},\"required\":[],\"reglas\":\"\"}",
            "Model": "{\"Nombre\":null,\"Descripcion\":null,\"UrlLogicApp\":null,\"LogicAppRelacionada\":null}",
            "VersionFormulario": 13,
            "VersionSwagger": 0,
            "Url": "as-formularios-api-qa.azurewebsites.net",
            "NombreFormulario": "1",
            "EstadoFormulario": 0,
            "DireccionIp": null,
            "Usuario": null,
            "Ordenamiento": 0,
            "EsPlantilla": false,
            "ColumnaOrdenamiento": null,
            "NumeroPagina": 0,
            "TamañoPagina": 0,
            "Descripcion": null,
            "Reglas": "{\"reglas\":[]}",
            "Entidad": null,
            "ElementosActualesEnFormulario": null,
            "ElementosModificadoDelFormulario": null,
            "Componentes": "[{\"id\":\"NivelPadre\",\"key\":\"NivelPadre\",\"title\":\"NivelPadre\",\"type\":\"controlSelect\",\"tipoControl\":\"Lista desplegable\",\"placeholder\":\"Lista NivelPadre\",\"tipo\":\"dropdownlist\",\"format\":\"dropdownlist\",\"tooltip\":\"NivelPadre\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"selectedValue\":\"\",\"tabOrder\":0,\"urlGet\":\"\",\"nameSelected\":\"\",\"valueSelected\":\"\",\"titleMap\":[],\"icon\":\"icon icon-select\",\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"tipoDato\":\"lista\",\"$$hashKey\":\"object:77\"},{\"id\":\"TieneLogicApp\",\"key\":\"TieneLogicApp\",\"title\":\"TieneLogicApp\",\"tooltip\":\"TieneLogicApp\",\"tipoControl\":\"Selección Única\",\"type\":\"controlSeleccionUnica\",\"validationText\":\"\",\"activo\":\"\",\"required\":false,\"format\":\"boolean\",\"tipo\":\"checkbox\",\"htmlClass\":\"checkbox\",\"tabOrder\":0,\"defaultValue\":false,\"visible\":true,\"scripts\":\"\",\"icon\":\"icon icon-checkbox\",\"tipoDato\":\"booleano\",\"$$hashKey\":\"object:79\"},{\"id\":\"Version\",\"key\":\"Version\",\"title\":\"Version\",\"placeholder\":\"Version\",\"tipoControl\":\"Numerico\",\"tooltip\":\"Digite Version\",\"type\":\"controlNumerico\",\"tipo\":\"controlNumerico\",\"required\":false,\"validationText\":\"\",\"format\":\"number\",\"htmlClass\":\"form-control\",\"readonly\":false,\"activo\":\"\",\"tabOrder\":0,\"regex\":\"\",\"formato\":\" \",\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxValue\":100,\"minValue\":0,\"decimalNum\":2,\"icon\":\"icon icon-numerico\",\"tipoDato\":\"numero\",\"$$hashKey\":\"object:81\"},{\"id\":\"EstadoGeneralNivel\",\"key\":\"EstadoGeneralNivel\",\"title\":\"EstadoGeneralNivel\",\"placeholder\":\"EstadoGeneralNivel\",\"tipoControl\":\"Numerico\",\"tooltip\":\"Digite EstadoGeneralNivel\",\"type\":\"controlNumerico\",\"tipo\":\"controlNumerico\",\"required\":false,\"validationText\":\"\",\"format\":\"number\",\"htmlClass\":\"form-control\",\"readonly\":false,\"activo\":\"\",\"tabOrder\":0,\"regex\":\"\",\"formato\":\" \",\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxValue\":100,\"minValue\":0,\"decimalNum\":2,\"icon\":\"icon icon-numerico\",\"tipoDato\":\"numero\",\"$$hashKey\":\"object:82\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"EstadosFlujosNivel.csv\",\"exporterPdfFilename\":\"EstadosFlujosNivel.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"EstadosFlujosNivel\",\"key\":\"EstadosFlujosNivel\",\"title\":\"EstadosFlujosNivel\",\"tooltip\":\"EstadosFlujosNivel\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:83\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"EstadosProyectosNiveles.csv\",\"exporterPdfFilename\":\"EstadosProyectosNiveles.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"EstadosProyectosNiveles\",\"key\":\"EstadosProyectosNiveles\",\"title\":\"EstadosProyectosNiveles\",\"tooltip\":\"EstadosProyectosNiveles\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:84\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"Instancias.csv\",\"exporterPdfFilename\":\"Instancias.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"Instancias\",\"key\":\"Instancias\",\"title\":\"Instancias\",\"tooltip\":\"Instancias\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:85\"},{\"id\":\"FechaModificacion\",\"key\":\"FechaModificacion\",\"title\":\"FechaModificacion\",\"type\":\"controlFecha\",\"tipoControl\":\"Campo de Fecha\",\"tipo\":\"fecha\",\"format\":\"YYYY/MM/DD\",\"tooltip\":\"FechaModificacion\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"tabOrder\":0,\"today\":false,\"icon\":\"icon icon-calendar\",\"tipoDato\":\"fecha\",\"$$hashKey\":\"object:87\"},{\"id\":\"DireccionIp\",\"key\":\"DireccionIp\",\"title\":\"DireccionIp\",\"placeholder\":\"Digite DireccionIp\",\"tooltip\":\"DireccionIp\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:88\"},{\"id\":\"Usuario\",\"key\":\"Usuario\",\"title\":\"Usuario\",\"placeholder\":\"Digite Usuario\",\"tooltip\":\"Usuario\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:89\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"NivelesHijos.csv\",\"exporterPdfFilename\":\"NivelesHijos.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"NivelesHijos\",\"key\":\"NivelesHijos\",\"title\":\"NivelesHijos\",\"tooltip\":\"NivelesHijos\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:90\"},{\"$$hashKey\":\"object:165\",\"id\":\"FechaCreacion\",\"key\":\"FechaCreacion\",\"title\":\"FechaCreacion\",\"type\":\"controlFecha\",\"tipoControl\":\"Campo de Fecha\",\"tipo\":\"fecha\",\"format\":\"YYYY/MM/DD\",\"tooltip\":\"FechaCreacion\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":true,\"activo\":\"\",\"scripts\":\"\",\"tabOrder\":0,\"today\":false,\"icon\":\"icon icon-calendar\",\"tipoDato\":\"fecha\",\"dateBeg\":\"2017-07-10T05:00:00.000Z\",\"dateEnd\":\"2017-07-20T05:00:00.000Z\",\"defaultValue\":\"2017-07-15T05:00:00.000Z\"}]",
            "IdAplicacion": "00000000-0000-0000-0000-000000000000",
            "IdNivel": "00000000-0000-0000-0000-000000000000",
            "TieneGuardar": false,
            "TieneControles": true
        }
    }




    var formularioSinModelo = {

        data: {
            "$id": "1",
            "Id": "f27afe2e-9031-4149-b9d9-063346991654",
            "Disenador": "[{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"$$hashKey\":\"object:1295\",\"id\":\"Nombre\",\"key\":\"Nombre\",\"title\":\"Nombre\",\"tooltip\":\"Nombre\",\"type\":\"controlTexto\",\"required\":false,\"htmlClass\":\"form-control\",\"defaultValue\":\"\",\"scripts\":\"\",\"tipoDato\":\"texto\",\"format\":\"string\",\"tipo\":\"text\",\"icon\":\"icon icon-text\",\"regex\":\"\",\"maxLength\":5}]],\"$$hashKey\":\"object:1287\"},{\"type\":\"contenedorDosColumnas\",\"id\":2,\"src\":\"/img/col02.png\",\"nombre\":\"2 col\",\"columns\":[[{\"estatico\":true,\"id\":\"Titulo\",\"key\":\"Titulo\",\"title\":\"Título y subtítulo\",\"tipoControl\":\"Título y subtítulo\",\"tipo\":\"title\",\"type\":\"controlTitulo\",\"format\":\"Campo texto largo\",\"textAling\":\"center\",\"tamano\":\"small\",\"visible\":true,\"titulo\":\"Título\",\"subtitulo\":\"Subtítulo\",\"content\":\"Título\",\"esInformativo\":true,\"icon\":\"icon icon-title\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:659\"}],[{\"id\":\"Descripcion\",\"key\":\"Descripcion\",\"title\":\"Descripcion\",\"placeholder\":\"Digite Descripcion\",\"tooltip\":\"Descripcion\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:847\"}]],\"$$hashKey\":\"object:646\"},{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"id\":\"UrlLogicApp\",\"key\":\"UrlLogicApp\",\"title\":\"UrlLogicApp\",\"placeholder\":\"Digite UrlLogicApp\",\"tooltip\":\"UrlLogicApp\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:633\"}]],\"$$hashKey\":\"object:628\"},{\"type\":\"contenedor\",\"id\":1,\"src\":\"/img/col01.png\",\"nombre\":\"1 col\",\"columns\":[[{\"id\":\"LogicAppRelacionada\",\"key\":\"LogicAppRelacionada\",\"title\":\"LogicAppRelacionada\",\"type\":\"controlSelect\",\"tipoControl\":\"Lista desplegable\",\"placeholder\":\"Lista LogicAppRelacionada\",\"tipo\":\"dropdownlist\",\"format\":\"dropdownlist\",\"tooltip\":\"LogicAppRelacionada\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"selectedValue\":null,\"tabOrder\":0,\"urlGet\":\"\",\"nameSelected\":\"\",\"valueSelected\":\"\",\"titleMap\":[],\"icon\":\"icon icon-select\",\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"tipoDato\":\"lista\",\"$$hashKey\":\"object:448\"}]],\"$$hashKey\":\"object:327\"}]",
            "Form": "[{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"Nombre\",\"title\":\"Nombre\",\"type\":\"text\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"tooltip\":\"Nombre\",\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"Nombre\\\")\",\"description\":\"Nombre\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-6\",\"items\":[{\"key\":\"Titulo\",\"title\":\"Título y subtítulo\",\"type\":\"title\",\"format\":\"Campo texto largo\",\"titulo\":\"Título\",\"subtitulo\":\"Subtítulo\",\"textAling\":\"center\",\"tamano\":\"small\",\"visible\":true,\"esInformativo\":true,\"condition\":\"vm.esCampoVisible(\\\"Titulo\\\")\"}]},{\"type\":\"section\",\"htmlClass\":\"col-xs-6\",\"items\":[{\"key\":\"Descripcion\",\"title\":\"Descripcion\",\"type\":\"string\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"placeholder\":\"Digite Descripcion\",\"tooltip\":\"Descripcion\",\"tabindex\":0,\"readonly\":false,\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"Descripcion\\\")\",\"description\":\"Descripcion\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"UrlLogicApp\",\"title\":\"UrlLogicApp\",\"type\":\"string\",\"defaultValue\":\"\",\"format\":\"string\",\"required\":false,\"placeholder\":\"Digite UrlLogicApp\",\"tooltip\":\"UrlLogicApp\",\"tabindex\":0,\"readonly\":false,\"visible\":true,\"condition\":\"vm.esCampoVisible(\\\"UrlLogicApp\\\")\",\"description\":\"UrlLogicApp\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"LogicAppRelacionada\",\"title\":\"LogicAppRelacionada\",\"type\":\"dropdownlist\",\"format\":\"dropdownlist\",\"required\":false,\"placeholder\":\"Lista LogicAppRelacionada\",\"tooltip\":\"LogicAppRelacionada\",\"tabindex\":0,\"urlGet\":\"\",\"valueSelect\":\"\",\"textSelect\":\"\",\"titleMap\":[],\"visible\":true,\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"condition\":\"vm.esCampoVisible(\\\"LogicAppRelacionada\\\")\",\"description\":\"LogicAppRelacionada\"}]}]},{\"type\":\"section\",\"htmlClass\":\"row\",\"items\":[{\"type\":\"section\",\"htmlClass\":\"col-xs-12\",\"items\":[{\"key\":\"BarraDeProgreso\",\"title\":\"Progreso\",\"type\":\"barraDeProgreso\",\"tamano\":\"big\",\"visible\":true,\"valorMinimo\":0,\"valorMaximo\":100,\"porcentaje\":100,\"esInformativo\":true,\"condition\":\"vm.esCampoVisible(\\\"BarraDeProgreso\\\")\"}]}]},{\"type\":\"submit\",\"style\":\"btn-success\",\"title\":\"OK\"}]",
            "Schema": "{\"type\":\"object\",\"title\":\"Comment\",\"properties\":{\"Nombre\":{\"title\":\"Nombre\",\"type\":\"text\",\"format\":\"string\",\"maxLength\":5,\"pattern\":\"\",\"description\":\"Nombre\"},\"Titulo\":{\"title\":\"Título y subtítulo\",\"type\":\"title\",\"format\":\"Campo texto largo\"},\"Descripcion\":{\"title\":\"Descripcion\",\"type\":\"string\",\"format\":\"string\",\"maxLength\":200,\"pattern\":\"\",\"description\":\"Descripcion\"},\"UrlLogicApp\":{\"title\":\"UrlLogicApp\",\"type\":\"string\",\"format\":\"string\",\"maxLength\":200,\"pattern\":\"\",\"description\":\"UrlLogicApp\"},\"LogicAppRelacionada\":{\"title\":\"LogicAppRelacionada\",\"type\":[\"object\",null],\"format\":\"dropdownlist\",\"description\":\"LogicAppRelacionada\"},\"BarraDeProgreso\":{\"title\":\"Progreso\",\"type\":\"barraDeProgreso\"}},\"required\":[],\"reglas\":\"\"}",
            "Model": "",
            "VersionFormulario": 13,
            "VersionSwagger": 0,
            "Url": "as-formularios-api-qa.azurewebsites.net",
            "NombreFormulario": "1",
            "EstadoFormulario": 0,
            "DireccionIp": null,
            "Usuario": null,
            "Ordenamiento": 0,
            "EsPlantilla": false,
            "ColumnaOrdenamiento": null,
            "NumeroPagina": 0,
            "TamañoPagina": 0,
            "Descripcion": null,
            "Reglas": "{\"reglas\":[]}",
            "Entidad": null,
            "ElementosActualesEnFormulario": null,
            "ElementosModificadoDelFormulario": null,
            "Componentes": "[{\"id\":\"NivelPadre\",\"key\":\"NivelPadre\",\"title\":\"NivelPadre\",\"type\":\"controlSelect\",\"tipoControl\":\"Lista desplegable\",\"placeholder\":\"Lista NivelPadre\",\"tipo\":\"dropdownlist\",\"format\":\"dropdownlist\",\"tooltip\":\"NivelPadre\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"selectedValue\":\"\",\"tabOrder\":0,\"urlGet\":\"\",\"nameSelected\":\"\",\"valueSelected\":\"\",\"titleMap\":[],\"icon\":\"icon icon-select\",\"listaDependiente\":\"\",\"habilitarBusqueda\":false,\"tipoDato\":\"lista\",\"$$hashKey\":\"object:77\"},{\"id\":\"TieneLogicApp\",\"key\":\"TieneLogicApp\",\"title\":\"TieneLogicApp\",\"tooltip\":\"TieneLogicApp\",\"tipoControl\":\"Selección Única\",\"type\":\"controlSeleccionUnica\",\"validationText\":\"\",\"activo\":\"\",\"required\":false,\"format\":\"boolean\",\"tipo\":\"checkbox\",\"htmlClass\":\"checkbox\",\"tabOrder\":0,\"defaultValue\":false,\"visible\":true,\"scripts\":\"\",\"icon\":\"icon icon-checkbox\",\"tipoDato\":\"booleano\",\"$$hashKey\":\"object:79\"},{\"id\":\"Version\",\"key\":\"Version\",\"title\":\"Version\",\"placeholder\":\"Version\",\"tipoControl\":\"Numerico\",\"tooltip\":\"Digite Version\",\"type\":\"controlNumerico\",\"tipo\":\"controlNumerico\",\"required\":false,\"validationText\":\"\",\"format\":\"number\",\"htmlClass\":\"form-control\",\"readonly\":false,\"activo\":\"\",\"tabOrder\":0,\"regex\":\"\",\"formato\":\" \",\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxValue\":100,\"minValue\":0,\"decimalNum\":2,\"icon\":\"icon icon-numerico\",\"tipoDato\":\"numero\",\"$$hashKey\":\"object:81\"},{\"id\":\"EstadoGeneralNivel\",\"key\":\"EstadoGeneralNivel\",\"title\":\"EstadoGeneralNivel\",\"placeholder\":\"EstadoGeneralNivel\",\"tipoControl\":\"Numerico\",\"tooltip\":\"Digite EstadoGeneralNivel\",\"type\":\"controlNumerico\",\"tipo\":\"controlNumerico\",\"required\":false,\"validationText\":\"\",\"format\":\"number\",\"htmlClass\":\"form-control\",\"readonly\":false,\"activo\":\"\",\"tabOrder\":0,\"regex\":\"\",\"formato\":\" \",\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxValue\":100,\"minValue\":0,\"decimalNum\":2,\"icon\":\"icon icon-numerico\",\"tipoDato\":\"numero\",\"$$hashKey\":\"object:82\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"EstadosFlujosNivel.csv\",\"exporterPdfFilename\":\"EstadosFlujosNivel.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"EstadosFlujosNivel\",\"key\":\"EstadosFlujosNivel\",\"title\":\"EstadosFlujosNivel\",\"tooltip\":\"EstadosFlujosNivel\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:83\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"EstadosProyectosNiveles.csv\",\"exporterPdfFilename\":\"EstadosProyectosNiveles.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"EstadosProyectosNiveles\",\"key\":\"EstadosProyectosNiveles\",\"title\":\"EstadosProyectosNiveles\",\"tooltip\":\"EstadosProyectosNiveles\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:84\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"Instancias.csv\",\"exporterPdfFilename\":\"Instancias.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"Instancias\",\"key\":\"Instancias\",\"title\":\"Instancias\",\"tooltip\":\"Instancias\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:85\"},{\"id\":\"FechaModificacion\",\"key\":\"FechaModificacion\",\"title\":\"FechaModificacion\",\"type\":\"controlFecha\",\"tipoControl\":\"Campo de Fecha\",\"tipo\":\"fecha\",\"format\":\"YYYY/MM/DD\",\"tooltip\":\"FechaModificacion\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":false,\"activo\":\"\",\"scripts\":\"\",\"tabOrder\":0,\"today\":false,\"icon\":\"icon icon-calendar\",\"tipoDato\":\"fecha\",\"$$hashKey\":\"object:87\"},{\"id\":\"DireccionIp\",\"key\":\"DireccionIp\",\"title\":\"DireccionIp\",\"placeholder\":\"Digite DireccionIp\",\"tooltip\":\"DireccionIp\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:88\"},{\"id\":\"Usuario\",\"key\":\"Usuario\",\"title\":\"Usuario\",\"placeholder\":\"Digite Usuario\",\"tooltip\":\"Usuario\",\"type\":\"controlTexto\",\"tipoControl\":\"Texto\",\"tipo\":\"string\",\"required\":false,\"validationText\":\"\",\"format\":\"string\",\"regex\":\"\",\"htmlClass\":\"form-control\",\"readonly\":false,\"tabOrder\":0,\"defaultValue\":\"\",\"visible\":true,\"scripts\":\"\",\"maxLength\":200,\"icon\":\"icon icon-text\",\"tipoDato\":\"texto\",\"$$hashKey\":\"object:89\"},{\"data\":[],\"enableSorting\":true,\"columnDefs\":[],\"lang\":\"es\",\"enableFiltering\":false,\"enableGridMenu\":true,\"exporterMenuCsv\":false,\"exporterCsvFilename\":\"NivelesHijos.csv\",\"exporterPdfFilename\":\"NivelesHijos.pdf\",\"exporterMenuPdf\":false,\"paginationPageSizes\":[10,50,75],\"paginationPageSize\":10,\"enablePaginationControls\":false,\"id\":\"NivelesHijos\",\"key\":\"NivelesHijos\",\"title\":\"NivelesHijos\",\"tooltip\":\"NivelesHijos\",\"type\":\"controlTabla\",\"tipoControl\":\"Tabla\",\"urlServicioGrilla\":\"\",\"configuracionCabecera\":[],\"tipo\":\"grid\",\"icon\":\"icon icon-grid\",\"$$hashKey\":\"object:90\"},{\"$$hashKey\":\"object:165\",\"id\":\"FechaCreacion\",\"key\":\"FechaCreacion\",\"title\":\"FechaCreacion\",\"type\":\"controlFecha\",\"tipoControl\":\"Campo de Fecha\",\"tipo\":\"fecha\",\"format\":\"YYYY/MM/DD\",\"tooltip\":\"FechaCreacion\",\"validationText\":\"\",\"htmlClass\":\"form-control\",\"visible\":true,\"required\":true,\"activo\":\"\",\"scripts\":\"\",\"tabOrder\":0,\"today\":false,\"icon\":\"icon icon-calendar\",\"tipoDato\":\"fecha\",\"dateBeg\":\"2017-07-10T05:00:00.000Z\",\"dateEnd\":\"2017-07-20T05:00:00.000Z\",\"defaultValue\":\"2017-07-15T05:00:00.000Z\"}]",
            "IdAplicacion": "00000000-0000-0000-0000-000000000000",
            "IdNivel": "00000000-0000-0000-0000-000000000000",
            "TieneGuardar": false,
            "TieneControles": true
        }
    }

    // ReSharper disable InconsistentNaming
    window.beforeEach(inject(function ($rootScope, _$controller_, $sessionStorage, _servicioVisualizacionFormularioMock_, ejecutorReglasServicios) {
        // ReSharper restore InconsistentNaming
        $scope = $rootScope.$new();
        $controller = _$controller_;
        $sessionStorage.idFormulario = "F27AFE2E-9031-4149-B9D9-063346991654";
        servicioVisualizacionFormularioMock = _servicioVisualizacionFormularioMock_;

        ejecucionFormulariosController = $controller('ejecucionFormulariosController', {
            $scope: $scope,
            $sessionStorage: $sessionStorage,
            servicioVisualizacionFormulario: _servicioVisualizacionFormularioMock_,
            ejecutorReglasServicios: ejecutorReglasServicios
        });
    }));

    window.it('Controlador Instanciado', function () {
        expect(ejecucionFormulariosController).toBeDefined();
    });

    window.it('Que muestre mensaje de model no existentes.', function () {
        var respuestaMensaje = "No se puede renderizar el formulario.";
        ejecucionFormulariosController.idFormulario = "00000000-0000-0000-0000-000000000000";
        ejecucionFormulariosController.validarFormulario();
        expect(ejecucionFormulariosController.mensaje).toMatch(respuestaMensaje);

    });

    window.it('Que muestre mensaje exitoso.', function () {
        var respuestaMensaje = "La respuesta fue exitosa.";
        var promise = window.Promise.resolve(formularioCompleto);

        window.spyOn(servicioVisualizacionFormularioMock, "formulario").and.returnValue(promise);

        ejecucionFormulariosController.obtenerFormulario().then(function () {
            expect(ejecucionFormulariosController.mensaje).toMatch(respuestaMensaje);

        });

    });

    window.it('Que muestre falta informacion.', function () {
        var respuestaMensaje = "Faltan información para renderizar.";
        var promise = window.Promise.resolve(formularioSinModelo);

        window.spyOn(servicioVisualizacionFormularioMock, "formulario").and.returnValue(promise);

        ejecucionFormulariosController.obtenerFormulario().then(function () {
            expect(ejecucionFormulariosController.mensaje).toMatch(respuestaMensaje);

        });

    });


});